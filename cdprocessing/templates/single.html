{% extends "base.html" %}

{% block title %}Single Run{% endblock %}

{% block main %}

<form id="file-input" method="POST" enctype="multipart/form-data">
  <div id="blank-input">
    <h2>CD Blanks</h2>
    <label for="blank_id" class="btn">Upload a blank file...</label>
    <input name="blank" type="file" id="blank_id">
    {% csrf_token %}
  </div><div id="sample-input">
    <h2>CD Samples</h2>
    <label for="sample_id" class="btn">Upload a sample file...</label>
    <input name="sample" type="file">
  </div>
  <input type="submit">
</form>

<div id="output">
  <div id="chart"></div>
  {% if display_chart %}
  <script>
  $(function () {
    $('#chart').highcharts({
      title: {
        text: "Blank"
      },
      xAxis: {
        min: {{ min }},
        max: {{ max }}
      },
      series: [{
        data: {{ series }}
      }]
    });
  });
  </script>
  <form method="POST">
    <input type="hidden" name="series" value="{{ series }}">
    {% csrf_token %}
    <input type="submit" id="download">
  </form>
  {% endif %}
</div>
<!--
<div id="file-input">
  <form method="POST" enctype="multipart/form-data">
    <div id="blank-entry">
        <h2>Blank</h2>
        <input name="blank" type="file">
        {% csrf_token %}
        <input type="submit">
    </div><div id="sample-entry">
      <h2>Sample</h2>
      <input name="sample" type="file">
      {% csrf_token %}
      <input type="submit">
    </div>
  </form>

</div>
<div id="output">
  <div id="chart"></div>
  {% if display_chart %}
  <script>
  $(function () {
    $('#chart').highcharts({
      chart: {
        type: 'line',
        borderWidth: 1,
        plotBorderWidth: 1,
        margin: [50, 75, 50, 75]
      },
      title: {
        text: 'Single Run'
      },
      credits: {
        enabled: false
      },
      legend: {
        enabled: false
      },
      xAxis: {
        min: {{ min }},
        max: {{ max }},
        tickLength: -10,
        title: {
          text: "Wavelength (nm)",
          style: {"font-weight": "bold"}
        }
      },
      yAxis: {
        gridLineWidth: 0,
        tickWidth: 1,
        tickLength: -10,
        title: {
          text: "Absorbance",
          style: {"font-weight": "bold"}
        }
      },
      series: [{
         data: {{ series }},
         marker: {
           enabled: false
         }
      }]
    });
  })
  </script>
  {% endif %}
</div>-->
{% endblock %}
